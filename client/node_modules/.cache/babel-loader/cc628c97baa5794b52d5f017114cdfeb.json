{"ast":null,"code":"import axios from 'axios';\nimport { CLEAR_ERRORS, GET_ERRORS, SET_CURRENT_USER, SET_CURRENT_USER_INFO, CLEAR_CURRENT_USER_INFO, GET_ALL_TUTORS, GET_ALL_PARENTS, CLEAR_ALL_PARENTS, CLEAR_ALL_TUTORS } from './types';\nimport setAuthToken from '../utils/setAuthToken';\nimport jwt_decode from 'jwt-decode'; // Register User\n\nexport const registerUser = (userData, history) => dispatch => {\n  axios.post('api/registration', userData).then(res => history.push('/login')).catch(err => dispatch({\n    type: GET_ERRORS,\n    payload: err.response.data\n  }));\n}; // Login - Get User Token \n\nexport const loginUser = userData => dispatch => {\n  axios.post('api/authenticate', userData).then(res => {\n    // Save to localstorage \n    const {\n      token\n    } = res.data;\n    localStorage.setItem('jwtToken', token); // Set token to Auth  header \n\n    setAuthToken(token); // Decode token to get user data\n\n    const decoded = jwt_decode(token); // Set current user \n\n    dispatch(setCurrentUser(decoded));\n    dispatch({\n      type: CLEAR_ERRORS\n    });\n  }).catch(err => dispatch({\n    type: GET_ERRORS,\n    payload: err.response.data\n  }));\n}; // Set logged in user \n\nexport const setCurrentUser = decoded => {\n  return {\n    type: SET_CURRENT_USER,\n    payload: decoded\n  };\n}; // Get full logged in user info\n\nexport const getUserInfo = () => dispatch => {\n  axios.get('/api/current').then(res => dispatch({\n    type: SET_CURRENT_USER_INFO,\n    payload: res.data\n  })).catch(err => dispatch({\n    type: GET_ERRORS,\n    payload: err.response.data\n  }));\n}; // Get all tutors\n\nexport const getAllTutors = () => dispatch => {\n  axios.get('/api/admin/all-tutors').then(res => dispatch({\n    type: GET_ALL_TUTORS,\n    payload: res.data\n  })).catch(err => dispatch({\n    type: GET_ERRORS,\n    payload: err.response.data\n  }));\n}; // Get full logged in user info\n\nexport const getAllParents = () => dispatch => {\n  axios.get('/api/admin/all-parents').then(res => dispatch({\n    type: GET_ALL_PARENTS,\n    payload: res.data\n  })).catch(err => dispatch({\n    type: GET_ERRORS,\n    payload: err.response.data\n  }));\n}; // Log user out \n\nexport const logoutUser = () => dispatch => {\n  // Remove token from localStorage \n  localStorage.removeItem('jwtToken'); // Remove auth header for future requests\n\n  setAuthToken(false); // Set current user to {} which will set isAuthenticated to false \n\n  dispatch(setCurrentUser({})); // Clear all parents and tutors in state\n\n  dispatch(clearAllParents());\n  dispatch(clearAllTutors());\n}; // Clear User information\n\nexport const clearFullUserInfo = () => {\n  return {\n    type: CLEAR_CURRENT_USER_INFO\n  };\n}; // Clear All Tutors\n\nexport const clearAllTutors = () => {\n  return {\n    type: CLEAR_ALL_TUTORS\n  };\n}; // Clear All parents\n\nexport const clearAllParents = () => {\n  return {\n    type: CLEAR_ALL_PARENTS\n  };\n};","map":{"version":3,"sources":["C:/Users/abdit/IdeaProjects/mpp/mpp_wetutor/client/src/actions/authActions.js"],"names":["axios","CLEAR_ERRORS","GET_ERRORS","SET_CURRENT_USER","SET_CURRENT_USER_INFO","CLEAR_CURRENT_USER_INFO","GET_ALL_TUTORS","GET_ALL_PARENTS","CLEAR_ALL_PARENTS","CLEAR_ALL_TUTORS","setAuthToken","jwt_decode","registerUser","userData","history","dispatch","post","then","res","push","catch","err","type","payload","response","data","loginUser","token","localStorage","setItem","decoded","setCurrentUser","getUserInfo","get","getAllTutors","getAllParents","logoutUser","removeItem","clearAllParents","clearAllTutors","clearFullUserInfo"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nimport { CLEAR_ERRORS, GET_ERRORS, SET_CURRENT_USER, SET_CURRENT_USER_INFO, CLEAR_CURRENT_USER_INFO, GET_ALL_TUTORS, GET_ALL_PARENTS, CLEAR_ALL_PARENTS, CLEAR_ALL_TUTORS } from './types';\r\nimport setAuthToken from '../utils/setAuthToken';\r\nimport jwt_decode from 'jwt-decode';\r\n// Register User\r\nexport const registerUser = ( userData, history ) => dispatch => {\r\n    axios.post('api/registration', userData)\r\n        .then(res => history.push('/login'))\r\n        .catch(err => dispatch ({\r\n            type: GET_ERRORS,\r\n            payload: err.response.data\r\n        })\r\n    ) ;\r\n};\r\n\r\n// Login - Get User Token \r\nexport const loginUser = userData => dispatch => {\r\n    axios.post('api/authenticate', userData)\r\n    .then(res =>{\r\n        // Save to localstorage \r\n        const { token } = res.data;\r\n        localStorage.setItem('jwtToken', token);\r\n        // Set token to Auth  header \r\n        setAuthToken(token);\r\n        // Decode token to get user data\r\n        const decoded = jwt_decode(token);\r\n        // Set current user \r\n        dispatch(setCurrentUser(decoded));\r\n        dispatch({\r\n            type: CLEAR_ERRORS\r\n        })\r\n    })\r\n    .catch(err => dispatch ({\r\n        type: GET_ERRORS,\r\n        payload: err.response.data\r\n    }));\r\n};\r\n// Set logged in user \r\nexport const setCurrentUser = ( decoded ) => {\r\n    return {\r\n        type: SET_CURRENT_USER,\r\n        payload: decoded\r\n    }\r\n}\r\n\r\n// Get full logged in user info\r\nexport const getUserInfo  = () => dispatch => {\r\n    axios.get('/api/current')\r\n        .then(res => dispatch({\r\n            type: SET_CURRENT_USER_INFO,\r\n            payload: res.data\r\n        })\r\n        )\r\n        .catch(err => dispatch ({\r\n            type: GET_ERRORS,\r\n            payload: err.response.data\r\n        })\r\n    ) ;\r\n};\r\n\r\n// Get all tutors\r\nexport const getAllTutors  = () => dispatch => {\r\n    axios.get('/api/admin/all-tutors')\r\n        .then(res => dispatch({\r\n            type: GET_ALL_TUTORS,\r\n            payload: res.data\r\n        })\r\n        )\r\n        .catch(err => dispatch ({\r\n            type: GET_ERRORS,\r\n            payload: err.response.data\r\n        })\r\n    ) ;\r\n};\r\n\r\n// Get full logged in user info\r\nexport const getAllParents = () => dispatch => {\r\n    axios.get('/api/admin/all-parents')\r\n        .then(res => dispatch({\r\n            type: GET_ALL_PARENTS,\r\n            payload: res.data\r\n        })\r\n        )\r\n        .catch(err => dispatch ({\r\n            type: GET_ERRORS,\r\n            payload: err.response.data\r\n        })\r\n    ) ;\r\n};\r\n\r\n// Log user out \r\nexport const logoutUser = () => dispatch => {\r\n    // Remove token from localStorage \r\n    localStorage.removeItem('jwtToken');\r\n    // Remove auth header for future requests\r\n    setAuthToken(false);\r\n    // Set current user to {} which will set isAuthenticated to false \r\n    dispatch(setCurrentUser({}))\r\n\r\n    // Clear all parents and tutors in state\r\n    dispatch(clearAllParents());\r\n    dispatch(clearAllTutors());\r\n\r\n}\r\n\r\n// Clear User information\r\nexport const clearFullUserInfo = () => {\r\n    return {\r\n      type: CLEAR_CURRENT_USER_INFO,\r\n    };\r\n};\r\n\r\n// Clear All Tutors\r\nexport const clearAllTutors= () => {\r\n    return {\r\n      type: CLEAR_ALL_TUTORS,\r\n    };\r\n};\r\n\r\n// Clear All parents\r\nexport const clearAllParents= () => {\r\n    return {\r\n      type: CLEAR_ALL_PARENTS,\r\n    };\r\n};"]},"metadata":{},"sourceType":"module"}