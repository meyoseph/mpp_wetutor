{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\abdit\\\\IdeaProjects\\\\mpp\\\\mpp_wetutor\\\\client\\\\src\\\\components\\\\profile\\\\Profile.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport { Link } from \"react-router-dom\";\nimport Spinner from \"../common/spinner\";\nimport { getProfileByTutorId } from \"../../actions/profileActions\";\nimport ProfileBody from \"./ProfileBody\";\nimport ClickableRating from \"../common/ClickableRating\";\nimport { useToasts } from \"react-toast-notifications\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction withToast(Component) {\n  var _s = $RefreshSig$();\n\n  return _s(function WrappedComponent(props) {\n    _s();\n\n    const toastFuncs = useToasts();\n    return /*#__PURE__*/_jsxDEV(Component, { ...props,\n      ...toastFuncs\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 16,\n      columnNumber: 12\n    }, this);\n  }, \"EUYSjJZQ8kDi7SzR95H+L+Sao00=\", false, function () {\n    return [useToasts];\n  });\n}\n\nclass Profile extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      ratedValue: 0,\n      ratingLoading: false\n    };\n    this.handleRating = this.handleRating.bind(this);\n    this.rateTutor = this.rateTutor.bind(this);\n  }\n\n  componentDidMount() {\n    if (this.props.match.params.tutorId) {\n      this.props.getProfileByTutorId(this.props.match.params.tutorId);\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {// if (nextProps.profile.profile === null && this.props.profile.loading) {\n    //   this.props.history.push(\"/not-found\");\n    // }\n  }\n\n  handleRating(value) {\n    this.setState({\n      ratedValue: value\n    });\n  }\n\n  async rateTutor(e) {\n    e.preventDefault();\n    this.setState({\n      loading: true\n    });\n    let ratingData = {\n      parentEmail: this.props.auth.userInfo.email,\n      tutorEmail: this.props.profile.profile.tutor.email,\n      rating: this.state.ratedValue\n    };\n    await axios.post('/api/tutor/rate-tutor', ratingData).then(res => {\n      if (res.data.success) {\n        window.$(\"#exampleModalCenter\").modal(\"hide\");\n        this.props.addToast(res.data.message, {\n          appearance: \"success\",\n          autoDismiss: true\n        });\n        this.props.getProfileByTutorId(this.props.match.params.tutorId);\n      }\n    }).catch(err => this.props.addToast(err.data.message, {\n      appearance: \"error\",\n      autoDismiss: true\n    }));\n    this.setState({\n      loading: true\n    });\n  }\n\n  render() {\n    const {\n      profile,\n      loading\n    } = this.props.profile;\n    const {\n      userInfo\n    } = this.props.auth;\n    const {\n      ratingLoading,\n      ratedValue\n    } = this.state;\n    let profileContent;\n    let userType = \"\";\n    let homeLink = \"/dashboard\";\n\n    if (userInfo && userInfo.roles && userInfo.roles[0] !== undefined) {\n      userType = userInfo.roles[0].roleName;\n      homeLink = userInfo.roles[0].roleName === \"admin\" ? \"/admin-dashboard\" : userInfo.roles[0].roleName === \"parent\" ? \"/parent-dashboard\" : \"/dashboard\";\n    }\n\n    if (profile === null || loading) {\n      profileContent = /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 24\n      }, this);\n    } else {\n      profileContent = /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-6\",\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: homeLink,\n              className: \"btn btn-light mb3 float-light\",\n              children: \"Back back\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 13\n          }, this), userType === \"parent\" && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-6\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn mb3 float-right\",\n              type: \"button\",\n              \"data-toggle\": \"modal\",\n              \"data-target\": \"#exampleModalCenter\",\n              style: {\n                backgroundColor: \"orange\",\n                color: \"white\"\n              },\n              children: \"Rate tutor\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal fade\",\n            id: \"exampleModalCenter\",\n            tabIndex: \"-1\",\n            role: \"dialog\",\n            \"aria-labelledby\": \"exampleModalCenterTitle\",\n            \"aria-hidden\": \"true\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"modal-dialog modal-dialog-centered\",\n              role: \"document\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"modal-content\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"modal-header\",\n                  style: {\n                    borderBottom: \"0 none\"\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                    className: \"modal-title\",\n                    id: \"exampleModalLongTitle\",\n                    children: \"Confirmation\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 140,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    className: \"close\",\n                    \"data-dismiss\": \"modal\",\n                    \"aria-label\": \"Close\",\n                    children: /*#__PURE__*/_jsxDEV(\"span\", {\n                      \"aria-hidden\": \"true\",\n                      children: \"\\xD7\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 149,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 143,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 136,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"modal-body\",\n                  children: [\"How much do you want to give \", profile.firstName, \" \", profile.lastName, \" ?\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 152,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"row\",\n                  style: {\n                    marginLeft: \"150px\"\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(ClickableRating, {\n                    value: profile.rating,\n                    profileRating: this.handleRating,\n                    type: \"flex\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 157,\n                    columnNumber: 21\n                  }, this), \"   \", /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"ml-2 mb-2\",\n                    children: ratedValue\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 163,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 156,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-md-5\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 166,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-md-2\",\n                    children: ratingLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"spinner-border text-info \",\n                      role: \"status\",\n                      children: /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"sr-only justify-content-center\",\n                        children: \"Loading...\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 173,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 169,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 167,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-md-5\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 179,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 165,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"modal-footer mt-3\",\n                  style: {\n                    borderTop: \"0 none\"\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    className: \"btn btn-secondary\",\n                    \"data-dismiss\": \"modal\",\n                    children: \"Close\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 185,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    className: \"btn btn-info\",\n                    onClick: this.rateTutor,\n                    children: \"Rate\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 192,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 181,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 135,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ProfileBody, {\n          profile: profile,\n          userInfo: userInfo\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile mt-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-12\",\n            children: profileContent\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nProfile.propTypes = {\n  getProfileByTutorId: PropTypes.func.isRequired,\n  profile: PropTypes.object.isRequired,\n  auth: PropTypes.object.isRequired\n};\n\nconst mapStateToProps = state => ({\n  profile: state.profile,\n  auth: state.auth\n});\n\nexport default connect(mapStateToProps, {\n  getProfileByTutorId\n})(withToast(Profile));","map":{"version":3,"sources":["C:/Users/abdit/IdeaProjects/mpp/mpp_wetutor/client/src/components/profile/Profile.js"],"names":["React","Component","connect","PropTypes","Link","Spinner","getProfileByTutorId","ProfileBody","ClickableRating","useToasts","axios","withToast","WrappedComponent","props","toastFuncs","Profile","constructor","state","ratedValue","ratingLoading","handleRating","bind","rateTutor","componentDidMount","match","params","tutorId","componentWillReceiveProps","nextProps","value","setState","e","preventDefault","loading","ratingData","parentEmail","auth","userInfo","email","tutorEmail","profile","tutor","rating","post","then","res","data","success","window","$","modal","addToast","message","appearance","autoDismiss","catch","err","render","profileContent","userType","homeLink","roles","undefined","roleName","backgroundColor","color","borderBottom","firstName","lastName","marginLeft","borderTop","propTypes","func","isRequired","object","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Spinner from \"../common/spinner\";\r\nimport { getProfileByTutorId } from \"../../actions/profileActions\";\r\nimport ProfileBody from \"./ProfileBody\";\r\nimport ClickableRating from \"../common/ClickableRating\";\r\nimport { useToasts } from \"react-toast-notifications\";\r\n\r\nimport axios from \"axios\";\r\n\r\nfunction withToast(Component) {\r\n  return function WrappedComponent(props) {\r\n    const toastFuncs = useToasts();\r\n    return <Component {...props} {...toastFuncs} />;\r\n  };\r\n}\r\n\r\nclass Profile extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      ratedValue: 0,\r\n      ratingLoading: false,\r\n    };\r\n    this.handleRating = this.handleRating.bind(this);\r\n    this.rateTutor = this.rateTutor.bind(this);\r\n  }\r\n  componentDidMount() {\r\n    if (this.props.match.params.tutorId) {\r\n      this.props.getProfileByTutorId(this.props.match.params.tutorId);\r\n    }\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    // if (nextProps.profile.profile === null && this.props.profile.loading) {\r\n    //   this.props.history.push(\"/not-found\");\r\n    // }\r\n  }\r\n\r\n  handleRating(value) {\r\n    this.setState({ ratedValue: value });\r\n  }\r\n\r\n  async rateTutor(e) {\r\n    e.preventDefault();\r\n\r\n    this.setState({ loading: true });\r\n\r\n    let ratingData = {\r\n      parentEmail: this.props.auth.userInfo.email,\r\n      tutorEmail: this.props.profile.profile.tutor.email,\r\n      rating: this.state.ratedValue,\r\n    };\r\n\r\n    await axios.post('/api/tutor/rate-tutor', ratingData)\r\n      .then((res) => {\r\n        if (res.data.success) {\r\n          window.$(\"#exampleModalCenter\").modal(\"hide\");\r\n          this.props.addToast(res.data.message, {\r\n            appearance: \"success\",\r\n            autoDismiss: true,\r\n          });\r\n          this.props.getProfileByTutorId(this.props.match.params.tutorId);\r\n        }\r\n      })\r\n      .catch((err) =>\r\n        this.props.addToast(err.data.message, {\r\n          appearance: \"error\",\r\n          autoDismiss: true,\r\n        })\r\n      );\r\n\r\n    this.setState({ loading: true });\r\n  }\r\n\r\n  render() {\r\n    const { profile, loading } = this.props.profile;\r\n    const { userInfo } = this.props.auth;\r\n    const { ratingLoading, ratedValue } = this.state;\r\n\r\n    let profileContent;\r\n\r\n    let userType = \"\";\r\n\r\n    let homeLink = \"/dashboard\";\r\n    if (userInfo && userInfo.roles && userInfo.roles[0] !== undefined) {\r\n      userType = userInfo.roles[0].roleName;\r\n      homeLink =\r\n        userInfo.roles[0].roleName === \"admin\"\r\n          ? \"/admin-dashboard\"\r\n          : userInfo.roles[0].roleName === \"parent\"\r\n          ? \"/parent-dashboard\"\r\n          : \"/dashboard\";\r\n    }\r\n\r\n    if (profile === null || loading) {\r\n      profileContent = <Spinner />;\r\n    } else {\r\n      profileContent = (\r\n        <div>\r\n          <div className=\"row\">\r\n            <div className=\"col-md-6\">\r\n              <Link to={homeLink} className=\"btn btn-light mb3 float-light\">\r\n                Back back\r\n              </Link>\r\n            </div>\r\n            {userType === \"parent\" && (\r\n              <div className=\"col-md-6\">\r\n                <button\r\n                  className=\"btn mb3 float-right\"\r\n                  type=\"button\"\r\n                  data-toggle=\"modal\"\r\n                  data-target=\"#exampleModalCenter\"\r\n                  style={{ backgroundColor: \"orange\", color: \"white\" }}\r\n                >\r\n                  Rate tutor\r\n                </button>\r\n              </div>\r\n            )}\r\n            {/* Modal */}\r\n            <div\r\n              className=\"modal fade\"\r\n              id=\"exampleModalCenter\"\r\n              tabIndex=\"-1\"\r\n              role=\"dialog\"\r\n              aria-labelledby=\"exampleModalCenterTitle\"\r\n              aria-hidden=\"true\"\r\n            >\r\n              <div\r\n                className=\"modal-dialog modal-dialog-centered\"\r\n                role=\"document\"\r\n              >\r\n                <div className=\"modal-content\">\r\n                  <div\r\n                    className=\"modal-header\"\r\n                    style={{ borderBottom: \"0 none\" }}\r\n                  >\r\n                    <h5 className=\"modal-title\" id=\"exampleModalLongTitle\">\r\n                      Confirmation\r\n                    </h5>\r\n                    <button\r\n                      type=\"button\"\r\n                      className=\"close\"\r\n                      data-dismiss=\"modal\"\r\n                      aria-label=\"Close\"\r\n                    >\r\n                      <span aria-hidden=\"true\">&times;</span>\r\n                    </button>\r\n                  </div>\r\n                  <div className=\"modal-body\">\r\n                    How much do you want to give {profile.firstName}{\" \"}\r\n                    {profile.lastName} ?\r\n                  </div>\r\n                  <div className=\"row\" style={{ marginLeft: \"150px\" }}>\r\n                    <ClickableRating\r\n                      value={profile.rating}\r\n                      profileRating={this.handleRating}\r\n                      type=\"flex\"\r\n                    />\r\n                    {\"   \"}\r\n                    <div className=\"ml-2 mb-2\">{ratedValue}</div>\r\n                  </div>\r\n                  <div className=\"row\">\r\n                    <div className=\"col-md-5\"></div>\r\n                    <div className=\"col-md-2\">\r\n                      {ratingLoading && (\r\n                        <div\r\n                          className=\"spinner-border text-info \"\r\n                          role=\"status\"\r\n                        >\r\n                          <span className=\"sr-only justify-content-center\">\r\n                            Loading...\r\n                          </span>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                    <div className=\"col-md-5\"></div>\r\n                  </div>\r\n                  <div\r\n                    className=\"modal-footer mt-3\"\r\n                    style={{ borderTop: \"0 none\" }}\r\n                  >\r\n                    <button\r\n                      type=\"button\"\r\n                      className=\"btn btn-secondary\"\r\n                      data-dismiss=\"modal\"\r\n                    >\r\n                      Close\r\n                    </button>\r\n                    <button type=\"button\" className=\"btn btn-info\" onClick={this.rateTutor}>\r\n                      Rate\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <ProfileBody profile={profile} userInfo={userInfo} />\r\n        </div>\r\n      );\r\n    }\r\n    return (\r\n      <div className=\"profile mt-4\">\r\n        <div className=\"container\">\r\n          <div className=\"row\">\r\n            <div className=\"col-md-12\">{profileContent}</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nProfile.propTypes = {\r\n  getProfileByTutorId: PropTypes.func.isRequired,\r\n  profile: PropTypes.object.isRequired,\r\n  auth: PropTypes.object.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  profile: state.profile,\r\n  auth: state.auth,\r\n});\r\n\r\nexport default connect(mapStateToProps, { getProfileByTutorId })(\r\n  withToast(Profile)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}